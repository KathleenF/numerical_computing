\lab{Python}{Interfacing With Other Programming Languages Using Cython}{Interfacing With Other Programming Languages Using Cython}
\label{lab:cythonwrap}

\objective{Learn to interface with object files using Cython.}

There are several ways to interface with other languages from Python.
Python, since it is such a high-level language, for performance reasons, often needs to call functions from C and Fortran.
There is also an easy built in interface for R, which is a language that is used mostly for statistics.
Python can interface with C in a variety of ways.
There is a built in library, ctypes, that allows you to interface with object files compiled by other languages.
SWIG is another tool that is often used.
In these labs we will focus primarily on using Cython and F2PY to interface with other languages.

% Describe .o files and dll's
\section*{Object Files and DLL's}

For C, C++, and Fortran, the desired functions or classes are compiled into an object file containing instructions in assembly that can be used by compilers of a variety of languages.
Object files use the \li{.o} extension.
Object files that can be used and modified by multiple programs are called "shared objects" and use the \li{.so} extension.
When C code has been compiled with the proper headers, etc. to interface with Python, it uses the \li{.pyd} extension on Windows and the \li{.so} extension on Unix-based operating systems.
The two extensions are essentially the same, except that Python object files are distinguished from normal object files on Windows.
When you compile anything that uses functions from object files, you must tell your compiler to include the contents of the object file.
The part of the compiler that forms these links between the code is called the linker.
If you do not give your compiler proper instructions for linking, it will raise a linking error.
The compiler must also be able to find the necessary header files for compiling the source code.
This can be done by including the proper directories in the system path or by passing the paths to the proper directories as arguments to the compiler at compile time.

DLL's are object files that are loaded by the operating system instead of by the compiler.
They are libraries of functions much like .o files, but are loaded by the operating system.

In our instructions here we will use the compiler gcc to demonstrate how Python can be made to interface with other languages.
Other compilers can be used, but significant compatibility issues may arise.
Python's distutils package is designed to avoid some of the difficulty that comes when interfacing with interfacing with different compilers, and we will show some very basic examples of how it is used here.

\section*{Wrapping a C Function}

Consider the following C function.

\lstinputlisting[style=fromfile, language=C]{ctridiag.c}

% be sure to mention that they can't reload modules

% Wrap something simple with ctypes.

% Wrap the same thing with Cython.

% Give an example of working with arrays.
% (Use pointers, only use ndarray objects if there is space)

% Using C++ and Cython

% Wrapping classes (focus on Cython, show a ctypes example if there's space)